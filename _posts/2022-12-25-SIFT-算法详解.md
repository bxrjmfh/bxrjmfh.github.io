---
layout: post
title: SIFT 算法详解
categories: CV 基本算法 SIFT
tags: 解惑 计算机视觉算法 SIFT
---
# SIFT 算法详解

尺度不变特征变换算法是完成三创任务的核心算法，为了更好的运用该算法来完成工作，首先需要搞清楚算法的原理。

## 尺度不变性——高斯差分金字塔

在计算机视觉的课程上我也试着实现了高斯差分（DoG）的相关内容，但是对降采样啥的很不了解。讲解之后，对其理解更深了。

![image-20221224195901735](https://lh-picbed.oss-cn-chengdu.aliyuncs.com/image-20221224195901735.png)

所谓的差分金字塔，分为两个部分来理解，金字塔也就是通过间隔采样等方式来处理图像，得到不同尺寸的一组图像。高斯差分是由不同的$\sigma$值下的高斯卷积核产生的图像相减得到的一组输出，称作是高斯差分。

一般而言，金字塔的层数（Octaves）有以下公式计算：


$$
o = log_2(min(W,H))-3
$$


其中$W,H$分别是图像的长和宽。而一组DoG选取多少个$\sigma$ 一般由对比的图片数目决定，如选择两张图片（$n=2$）,那么就选择$n+3$也就是五组$\sigma$来计算DoG。

高斯金字塔的方法模拟的是远近图像不变性的方法。其中每一组中的$\sigma$值如下图公式计算得出。其中初始层数的$\sigma$由采样的初始值$\sigma=0.5$，到目标的$\sigma=1.6$的差值所决定的。

![image-20221224202705538](https://lh-picbed.oss-cn-chengdu.aliyuncs.com/image-20221224202705538.png)

考虑到具有关键信息的点，其特征不会由尺度变化而发生改变，因此可以依据这一特性来寻找特征点。也就是如下所示：

![image-20221224203425957](https://lh-picbed.oss-cn-chengdu.aliyuncs.com/image-20221224203425957.png)

首先进行阈值化的操作，认为像素（0-1）之间的绝对值过小的点可能是噪声，计算公式如途中所示。经过该步骤处理后，在高斯差分金字塔中找空间邻域内的极值，也就是不仅在一张DoG中寻找极值，也在上下两个不同$\sigma$也就是尺度下的图像中寻找极值。

对于不同尺度后的极值点可能取不到（右图），所以需要利用牛顿法求出关键点的精确值。牛顿法的思想就是将复杂函数进行二阶的泰勒展开，

![](https://lh-picbed.oss-cn-chengdu.aliyuncs.com/image-20221224203425957.png)

![image-20221224205542832](https://lh-picbed.oss-cn-chengdu.aliyuncs.com/image-20221224205542832.png)

随后对点进行筛选，为了消除边缘效应，也就是类比于二阶导为正负的时候其的曲率。

![image-20221224210431216](https://lh-picbed.oss-cn-chengdu.aliyuncs.com/image-20221224210431216.png)

有限差分法求梯度：

![image-20221224210727623](https://lh-picbed.oss-cn-chengdu.aliyuncs.com/image-20221224210727623.png)

## 旋转不变性——关键点方向

统计一定区域内像素的主方向，按梯度大小加权求取其特征向量，向量的维度由各方向细分而决定的。再利用KNN算法来匹配最相似的关键点。

![image-20221224211957918](https://lh-picbed.oss-cn-chengdu.aliyuncs.com/image-20221224211957918.png)





